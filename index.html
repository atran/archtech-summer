<!DOCTYPE html>
<html lang="en">
	<head>
		<title>SCI-Arc EDGE: ArchTech Summer Show 2022</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
	</head>

	<body>
		<style>
			@font-face {
				font-family: 'PxGrotesk-Bold';
				src:	url('assets/fonts/PxGrotesk-Bold.woff2') format('woff2'),
						url('assets/fonts/PxGrotesk-Bold.woff') format('woff');
			}

			:root {
			  /* Sizes that the rest of our system will be based on */
			  --ft-screen-width: 1440;
			  --ft-body: 20;
			  --ft-body-min: 1rem;
			  --ft-body-max: 1.375rem;
			  --ft-body-vw: calc(var(--ft-body) / var(--ft-screen-width) * 100vw);

			  /* Body, 20px on 1440px screens */
			  --ft-size-body: clamp(var(--ft-body-min), var(--ft-body-vw), var(--ft-body-max));

			  /* H1, 26px on 1440px screens */
			  --ft-h1: 32;
			  --ft-size-h1: clamp(var(--ft-body-min) * (var(--ft-h1) / var(--ft-body)), var(--ft-body-vw) * (var(--ft-h1) / var(--ft-body)), var(--ft-body-max) * (var(--ft-h1) / var(--ft-body)));

			  /* H1, 26px on 1440px screens */
			  --ft-h2: 26;
			  --ft-size-h2: clamp(var(--ft-body-min) * (var(--ft-h1) / var(--ft-body)), var(--ft-body-vw) * (var(--ft-h1) / var(--ft-body)), var(--ft-body-max) * (var(--ft-h1) / var(--ft-body)));
			}

			* {
				box-sizing: border-box;
				margin: 0;
				padding: 0;
				line-height: 1.3em;
			}

			header, footer {
				position: fixed;
				z-index: 10001;
				padding: 2vh;
				width: 100%;
			}

			footer {
				bottom: 0;
				text-align: right;
			}

			h1, h2 {
				font-family: 'PxGrotesk-Bold';
			}

			h1 {
				font-size: var(--ft-size-h1);
			}
		</style>



		<header>
			<h1>SCI-Arc EDGE: ArchTech Summer Show 2022</h1>
		</header>
		<footer>
			<h2>Happening IRL & URL on 9/3/22, starting at 5pm PST</h2>
		</footer>

		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->
		<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

		<script type="importmap">
			{
				"imports": {
					"three": "https://cdn.jsdelivr.net/npm/three@0.114.0/build/three.module.js"
				}
			}
		</script>

		<script type="module">

			import * as THREE from 'three';

			import { OBJLoader } from 'https://cdn.jsdelivr.net/npm/three@0.114.0/examples/jsm/loaders/OBJLoader.js';

			let container;

			let camera, scene, renderer;

			let mouseX = 0, mouseY = 0;

			let windowHalfX = window.innerWidth / 2;
			let windowHalfY = window.innerHeight / 2;

			let object;

			init();


			function init() {

				container = document.createElement( 'div' );
				document.body.appendChild( container );

				camera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 100 );
				camera.position.set( - 1, 1, 3 );

				// scene

				scene = new THREE.Scene();
				scene.background = new THREE.Color( 0xa0a0a0 );
				scene.fog = new THREE.Fog( 0xa0a0a0, 10, 50 );

				const hemiLight = new THREE.HemisphereLight( 0xffffff, 0x444444 );
				hemiLight.position.set( 0, 20, 0 );
				scene.add( hemiLight );

				const spotLight = new THREE.SpotLight( 0xffffff );
				spotLight.angle = Math.PI / 5;
				spotLight.penumbra = 0.2;
				spotLight.position.set( 2, 3, 3 );
				spotLight.castShadow = true;
				spotLight.shadow.camera.near = 3;
				spotLight.shadow.camera.far = 100;
				spotLight.shadow.mapSize.width = 1024;
				spotLight.shadow.mapSize.height = 1024;
				scene.add( spotLight );

				// ground

				
				const ground = new THREE.Mesh(
					new THREE.PlaneGeometry( 9, 9, 1, 1 ),
					new THREE.MeshPhongMaterial( { color: 0xa0adaf, shininess: 150 } )
				);

				ground.rotation.x = - Math.PI / 2; // rotates X/Y to X/Z
				ground.receiveShadow = true;
				scene.add( ground );

				// manager

				function loadModel() {

					object.traverse( function ( child ) {

						// if ( child.isMesh ) child.material.map = texture;
						if ( child.isMesh ) child.castShadow = true;

					} );

					// object.position.y = -60;
					object.scale.set(0.0005, 0.0005, 0.0005);
					// object.rotation.y = Math.PI / -1;


					scene.add( object );

				}

				const manager = new THREE.LoadingManager( loadModel );

				// texture

				// const textureLoader = new THREE.TextureLoader( manager );
				// const texture = textureLoader.load( './uv_grid_opengl.jpg' );

				// model

				function onProgress( xhr ) {

					if ( xhr.lengthComputable ) {

						const percentComplete = xhr.loaded / xhr.total * 100;
						console.log( 'model ' + Math.round( percentComplete, 2 ) + '% downloaded' );

					}

				}

				function onError() {}

				const loader = new OBJLoader( manager );
				loader.load( './assets/models/SCIArcPAL.obj', function ( obj ) {

					object = obj;

				}, onProgress, onError );

				//

				renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );

				document.addEventListener( 'mousemove', onDocumentMouseMove );

				//

				window.addEventListener( 'resize', onWindowResize );

			}

			function onWindowResize() {

				windowHalfX = window.innerWidth / 2;
				windowHalfY = window.innerHeight / 2;

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );

			}

			function onDocumentMouseMove( event ) {

				mouseX = ( event.clientX - windowHalfX ) / 100;
				mouseY = ( event.clientY - windowHalfY ) / 100;

			}

			//

			function animate() {

				requestAnimationFrame( animate );
				render();

			}

			function render() {

				camera.position.x += ( mouseX - camera.position.x ) * .05;
				// camera.position.y += ( - mouseY - camera.position.y ) * .05;

				camera.lookAt( scene.position );

				renderer.render( scene, camera );

			}

		</script>

	</body>
</html>